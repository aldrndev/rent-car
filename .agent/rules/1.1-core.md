# 1.1 â€” Core Engineering Standards

## Purpose

Override default human and AI behavior that optimizes for speed, shortcuts, or happy-path success. This is the foundation for all other rules.

## Priority Order (ABSOLUTE)

All decisions MUST follow this priority, in strict order:

1. Security
2. Correctness
3. Reliability
4. Maintainability
5. Performance
6. Convenience

Tradeoffs that violate this order are FORBIDDEN.

## Output Contract (ABSOLUTE)

- Output ONLY: `.ts` `.tsx` `.js` `.jsx` `.json` `.yaml` `.sql` `.md` `.css`
- Production-ready code ONLY
- If ANY requirement is unclear â†’ FAIL FAST with: `// TODO: requirements unclear â€” [specific question]`

## Type Safety (ABSOLUTE)

- `any` FORBIDDEN
- `unknown` ONLY with explicit narrowing
- Deprecated APIs FORBIDDEN
- `@ts-ignore` FORBIDDEN without documented reason and expiry date
- TypeScript strict mode REQUIRED

## Code Quality (ABSOLUTE)

### Linting & Formatting

**Default: Biome**

- All-in-one linter + formatter (replaces ESLint + Prettier)
- Rust-based â€” 10-25x faster
- Single config: `biome.json` at project root
- Format-on-save REQUIRED

**Fallback: ESLint + Prettier**

- Use ONLY if Biome lacks a specific rule/plugin you need
- ESLint for code quality, Prettier for formatting
- Configs at project root

### Lint Rules (Minimum)

These rules MUST be enforced regardless of tool:

- No `console.log` in production (warn)
- No explicit `any` (error)
- No deprecated APIs (error)
- No unused variables (warn, ignore `_` prefix)

### Self-Documenting Code

- TSDoc/JSDoc REQUIRED for all exported APIs
- Comments explain WHY, not WHAT
- Magic numbers FORBIDDEN â€” extract to named constants with rationale

### File Size Limits

- Backend files: MAX 400 LOC
- Frontend components: MAX 500 LOC
- If a file exceeds the limit â†’ split by responsibility

## Validation (ABSOLUTE)

Zod REQUIRED for:

- API input/output
- Environment variables
- DTOs (schema-first)

Implicit trust in client data FORBIDDEN.

## Naming & Module Boundaries (ABSOLUTE)

- Files/directories: `kebab-case`
- Variables/functions: `camelCase`
- Types/interfaces/classes: `PascalCase`
- Constants: `UPPER_SNAKE_CASE` or `camelCase` (project-consistent)
- Env vars: `UPPER_SNAKE_CASE`
- Path aliases REQUIRED: `@/` for local, `@pkg/*` for cross-package
- Relative imports `../../` FORBIDDEN (use path aliases)

### Feature Boundary Rule

- One feature = one domain module
- Cross-feature imports FORBIDDEN
- Shared logic ONLY in explicit shared packages/directories
- Feature access ONLY via public barrel exports (`index.ts`)

## Dependency Management (ABSOLUTE)

- Exact versions ONLY â€” `^`, `~`, `*`, `latest` FORBIDDEN
- Lockfile REQUIRED and committed
- Node and package manager versions pinned
- Deprecated dependencies FORBIDDEN
- ðŸŸ¡ CI MUST fail on critical vulnerabilities
- ðŸ”´ SBOM REQUIRED for release artifacts

### Dependency Install

- `pnpm add <pkg>@<exact-version>` REQUIRED
- No-version install FORBIDDEN
- `pnpm-lock.yaml` MUST be committed with dependency changes

### ðŸŸ¡ Audit & Outdated

- CI SHOULD run `pnpm audit`
- Major upgrades MUST be isolated commits with migration notes

## Git Workflow (AUTHORITATIVE)

### Solo Freelance (Default)

- `main` branch = production-ready
- Short-lived feature branches: `type/short-description`
- Branch types: `feat`, `fix`, `chore`, `refactor`, `docs`, `perf`, `test`, `ci`
- Delete branches after merge
- Rebase preferred for clean history

### ðŸŸ¡ With Client / Team

- Pull requests REQUIRED for review
- Protected `main` branch
- CI must pass before merge

### Commit Convention (ABSOLUTE)

- Conventional Commits REQUIRED: `feat`, `fix`, `chore`, `docs`, `refactor`, `perf`, `test`, `ci`
- Imperative mood REQUIRED ("Add feature" NOT "Added feature")
- Breaking changes explicitly marked in footer

## Documentation (ABSOLUTE)

Root `README.md` MUST include:

1. Prerequisites (exact Node version, package manager)
2. Quick Start (commands to run locally)
3. Environment (.env.example reference + explanation)
4. Architecture (high-level diagram or description)
5. Commands table (dev, build, test, lint, typecheck)

## Forbidden Shortcuts (ABSOLUTE)

- `any` for speed
- `console.log` (use structured logger)
- DB access in controllers
- `!important` in CSS
- `@ts-ignore` without documented reason
- Hardcoded URLs or secrets
- Inline styles for layout (use design tokens / CSS)

## Exception Protocol (ABSOLUTE)

Rule violations ONLY with:

- Written justification (code comment or decision doc)
- Scoped impact (affects minimal surface area)
- Time limit (expiry date)
- Rollback plan
- Exceptions are temporary and tracked
