# 2.2 — Design System & Architecture

## Purpose

Define UI architecture, component patterns, and design system rules that ensure visual consistency, accessibility, and maintainability across frontend and mobile projects.

## Design Tokens (ABSOLUTE)

Every project MUST define design tokens before building UI:

### Minimum Token Set

```css
/* colors */
--color-primary: ...;
--color-secondary: ...;
--color-background: ...;
--color-surface: ...;
--color-text: ...;
--color-text-muted: ...;
--color-border: ...;
--color-error: ...;
--color-success: ...;
--color-warning: ...;

/* typography */
--font-family-sans: ...;
--font-family-mono: ...;
--font-size-xs: ...;
--font-size-sm: ...;
--font-size-base: ...;
--font-size-lg: ...;
--font-size-xl: ...;
--font-size-2xl: ...;

/* spacing */
--space-1: 0.25rem;
--space-2: 0.5rem;
--space-3: 0.75rem;
--space-4: 1rem;
--space-6: 1.5rem;
--space-8: 2rem;

/* radii */
--radius-sm: ...;
--radius-md: ...;
--radius-lg: ...;
--radius-full: 9999px;

/* shadows */
--shadow-sm: ...;
--shadow-md: ...;
--shadow-lg: ...;
```

- Hardcoded color values in components FORBIDDEN — use tokens
- Inline magic spacing values FORBIDDEN — use spacing scale

## Component Architecture (ABSOLUTE)

### Component Categories

```
atoms/       → Button, Input, Badge, Avatar, Icon
molecules/   → SearchBar, FormField, Card, MenuItem
organisms/   → Header, Sidebar, DataTable, Form
templates/   → PageLayout, AuthLayout, DashboardLayout
pages/       → Actual route pages (compose templates + organisms)
```

> This is a reference mental model. The actual folder structure is defined in 2.3-blueprint.md and 3.1-frontend.md.

### Component Rules

- One component per file
- Components MUST be pure where possible (deterministic render from props)
- Business logic MUST NOT live in components — extract to hooks or services
- Components MUST NOT directly call APIs — use React Query hooks
- Props MUST be typed with TypeScript interface (no inline types)
- Default exports FORBIDDEN — use named exports

### Component Composition Pattern

```typescript
// Prefer composition over configuration
// ✅ Good
<Card>
  <Card.Header>Title</Card.Header>
  <Card.Body>Content</Card.Body>
</Card>

// ❌ Bad
<Card title="Title" body="Content" headerVariant="large" />
```

## Accessibility (ABSOLUTE)

- Minimum touch target: 44x44px
- Keyboard navigation REQUIRED for all interactive elements
- Screen reader compatibility REQUIRED
- Color contrast MUST meet WCAG AA (4.5:1 for text, 3:1 for large text)
- Focus indicators MUST be visible
- Placeholders MUST NOT replace labels
- Hover-only interactions FORBIDDEN
- `aria-label` REQUIRED for icon-only buttons
- Form inputs MUST have associated labels

## Responsive Design (ABSOLUTE)

- Mobile-first REQUIRED
- Breakpoint system REQUIRED:

```css
--breakpoint-sm: 640px;
--breakpoint-md: 768px;
--breakpoint-lg: 1024px;
--breakpoint-xl: 1280px;
```

- Horizontal scroll on mobile FORBIDDEN (unless explicitly justified)
- Content MUST be readable without horizontal scrolling at 320px width
- Images MUST be responsive (max-width: 100%)
- Font sizes MUST be fluid or responsive

## Animation & Motion (AUTHORITATIVE)

- Animations ONLY if UX-justified (feedback, state change, attention)
- Duration: 150-300ms for micro-interactions, 300-500ms for transitions
- `prefers-reduced-motion` MUST be respected
- Decorative animations MUST be disabled when reduced motion is preferred
- Layout-shifting animations FORBIDDEN

## Iconography (AUTHORITATIVE)

- One icon library per project (Lucide, Heroicons, or Phosphor recommended)
- Mixing icon libraries FORBIDDEN
- Icons MUST have accessible labels when used without text
- Icon sizes MUST follow the spacing scale

## Dark Mode (AUTHORITATIVE)

If dark mode is supported:

- Design tokens MUST support both light and dark themes
- Use CSS custom properties for theme switching
- Images MUST be tested in both themes
- Respect `prefers-color-scheme` system preference
- Manual toggle MUST persist user choice
